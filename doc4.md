# 思科网络安全

## 第一章

思科网络基础保护框架具有三个功能区：

- 控制平面：负责路由功能。包含由网络设备生成的用于操作网络的流量；
- 管理平面：负责管理网络设备；
- 数据（转发）平面：负责转发用户数据；

安全智能运营中心是思科网络安全工具是基于云的服务，可以向网络专业人员提供有关当前网络攻击的警报。

持续视频监控是在数据中心设施内部和外部中发现的安全措施。网关提供外部边界安全。安全陷阱、生物识别访问和出口传感器提供内部边界安全。

访问攻击：检索和修改数据、尝试升级访问权限；
侦查跟踪攻击：扫描可访问性、收集有关网络和设备的信息；
防止其他用户访问系统：拒绝服务攻击。

最小信任原则意味着网络系统不应不必要和无条件地相互访问和通用。

虚拟机监控程序劫持：在攻击数据中心过程中接管虚拟机监控程序。

病毒恶意软件的重要特征：病毒由主机系统上的事件触发。

电话盗用：黑客用哨子模仿音调，在模拟电话网络上拨打免费长途电话。

## 第二章

3 分钟的登录延迟，需要 180 秒。2 分钟内尝试失败的次数为 3，就是 120 秒内：login block-for 180 attempts 3 within 120。

控制平面策略：防止不必要的流量对路由处理器造成负担。
SNMP：管理 IP 网络上的设备。
思科 ACS ：访问控制服务器。
思科 AutoSecure：通过 CLI 获得，可以启动安全审计并进行配置更改。

SNMP 代理：执行 SNMP 管理器指示的操作。这些操作可能包括轮询、应用配置更改或转发陷阱和其他通知。
SNMP 管理器：可运行 SNMP 管理软件，并直接访问收集的信息。
MIB：管理信息库，它是由 SNMP 收集的分层组织的信息数据库。
OID：提供给 MIB 内的每条信息的对象 ID。

在思科路由器上创建视图涉及五个步骤：

1. 必须启用 AAA。
2. 必须使用 parser view view-name 创建视图。
3. 必须为视图分配加密密码。
4. 必须为视图分配命令。
5. 必须退出视图配置模式。

username name algorithm-type scrypt secret password 命令使用 **SHA scrypt** 哈希算法加密用户密码。结果称为类型 9 密码。
username name secret password 命令会使用 **MD5** 散列算法对用户密码进行加密。

CDP 是从其他相连的思科设备收集信息的思科专有协议，默认情况下在思科设备上启用。泄露有关路由器的重要信息，并可能使其更易遭受攻击。
LLDP 是提供相同服务的开放标准协议。
HTTP 和 FTP 是不收集有关网络设备的信息的应用层协议。

有 16 个可应用于用户账户的权限级别。级别 0、1 和 15 具有预定义设置。这使得级别 **2 到 14 可用于创建自定义访问级别**。

**HTTPS, SSH** 提供对路由器的安全远程访问。

要在路由器上实施 SSH，需要执行以下步骤：

1. 配置唯一的主机名。
2. 配置网络域名。
3. 配置用户账户以使用 AAA 或本地数据库进行认证。
4. 生成 RSA 密钥。
5. 启用 VTY SSH 会话。

## 第三章

TACACS + 使用 TCP，**加密整个数据包（不仅仅是密码）**，并将身份验证和授权分为两个不同的过程。
RADIUS **只加密密码**。
思科安全访问控制服务器软件支持这两种协议。

“authen response status = PASS”（认证响应状态 = 通过）

通过本地数据库保护设备访问（通过使用 AAA 中央服务器来解决）的方法要使用路由器本地配置的用户名和密码。这使得管理员可以跟踪登录设备的人员和时间。密码也可以在配置中加密。但是，**必须在该帐户应有权访问的每台设备上配置帐户信息，这使得此解决方案很难扩展**。

AAA 策略：aaa authentication login default group radius local none（无需进行配置即可正常工作）

AAA 状态消息的 status 可帮助网络管理员确定正在引用哪个方法列表。

加密 ACS 服务器和启用 AAA 的路由器之间的数据传输需要执行 **在服务器和路由器上以完全相同的方式配置密钥** 。

AAA 解决方案中授权的特征：**它的工作方式与权限级别和基于角色的 CLI 类似**，它会在用户进行认证后自动发生，不需要用户执行任何额外的步骤。

本地实施 AAA 的最大问题是：**本地实施不能很好地扩展**。
AAA 的用途之一是为网络设备提供安全认证。本地实施不使用 RADIUS 或 TACACS+ 服务器。它依赖于本地数据库对所有用户进行认证。

如果工作站未通过授权，802.1X 将使用**未授权**端口状态。

## 第四章

状态防火墙和下一代防火墙提供比数据包过滤防火墙更好的日志信息。既可以防止欺骗，又可以过滤不需要的流量。
下一代防火墙与状态防火墙相比具有以下优势：

- 应用中的精细化控制
- 根据站点信誉，过滤网站和应用流量
- **主动而不是被动防护互联网威胁**
- 基于包括用户、设备、角色、应用和威胁配置文件在内的多个标准，实施安全策略
- 通过 NAT、VPN 和状态检查，提高了性能
- 集成入侵防御系统（IPS）

数据包过滤防火墙的特征：**容易受到 IP 欺骗**，对网络性能的影响很小，无状态的，会单独检查每个数据包，不能很好地过滤分段的数据包。

access-list 100 deny icmp 192.168.10.0 0.0.0.255 any echo reply：串行接口上不允许出站流量。

标准 ACL 只能根据源地址过滤流量。这是它们通常置于最接近目的的位置的原因。
扩展 ACL 可以根据特定协议中的源和目的 IP 地址、端口号和特定消息类型，过滤流量。

传统防火墙将防火墙策略应用于**接口**。

permit icmp any any nd-na 放置在连接到另一个路由器并已启用 IPv6 的路由器接口上

如果流量来自路由器或者流向路由器，则允许自身区域中的**所有流量**。

在连接到互联网的路由器接口上，不应允许以下地址从互联网入站以缓解 IP 欺骗和 DoS 攻击：

- 全零地址
- 广播地址
- 以 127 开头的本地主机地址
- 保留的专用地址
- IP 组播地址

**echo** ICMP 消息类型应该停止入站。

基本的数据包过滤防火墙只能根据第 3 层（有时是基本的第 4 层信息）进行过滤。
应用网关防火墙或代理防火墙可以根据上层（如应用层）中的信息进行过滤。
NAT 防火墙可以扩展网络上的可用 IP 地址的数量。
状态防火墙可以确定连接是处于启动、数据传输还是终止阶段。

IDS/IPS 设备的两个主要警报生成机制是原子警报和汇总警报。
每次签名触发时都会生成原子警报。
使用汇总警报时，会为首次检测到攻击生成单个原子警报。然后在特定时间段内对重复的警报进行计数，但不会发送。达到指定的时间段后时，会发送警报，指示在该时间间隔内发生的警报的数量。

clear ip ips configuration 命令会禁用 IPS，删除所有 IPS 配置条目，并**释放动态资源**。
clear ip ips statistics 命令会重置已分析数据包的统计信息，并发送警报。
clear ip sdee events 命令将从缓冲区中清除 SDEE 事件。
clear ip sdee subscriptions 命令会清除 SDEE 订用。

## 第五章

基于策略的检测定义了基于历史分析的行为。
基于异常的检测涉及定义网络或主机的正常活动的概况。
基于签名的检测可搜索网络流量中特定的预定义的模式。
基于蜂蜜罐的检测使用虚拟服务器来吸引攻击；从而分散了对实际网络设备的攻击。

